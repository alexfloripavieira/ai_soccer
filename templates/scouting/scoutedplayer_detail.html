{% extends 'dashboard/base_dashboard.html' %}

{% block title %}{{ player.name }} - Jogador Observado{% endblock %}

{% block page_title %}{{ player.name }}{% endblock %}

{% block dashboard_content %}
<div class="space-y-6">
  <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h2 class="text-3xl font-bold text-slate-100">{{ player.name }}</h2>
      <p class="text-sm text-slate-400">
        {{ player.get_position_display }} · {{ player.nationality }} · {{ player.age }} anos
      </p>
    </div>
    <div class="flex flex-wrap gap-2">
      <a href="{% url 'scouting:player_update' player.pk %}"
         class="inline-flex items-center gap-2 rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 transition-all duration-150 hover:border-slate-500 hover:text-white">
        Editar
      </a>
      <a href="{% url 'scouting:player_delete' player.pk %}"
         class="inline-flex items-center gap-2 rounded-lg border border-red-500/40 px-4 py-2 text-sm font-semibold text-red-300 transition-all duration-150 hover:border-red-400 hover:text-red-100">
        Excluir
      </a>
      <a href="{% url 'scouting:player_list' %}"
         class="inline-flex items-center gap-2 rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 transition-all duration-150 hover:border-slate-500 hover:text-white">
        Voltar
      </a>
    </div>
  </div>

  <div class="grid gap-6 lg:grid-cols-3">
    <div class="lg:col-span-1">
      <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4 shadow-lg shadow-slate-950/40">
        {% if has_photo %}
          <img src="{{ player.photo.url }}"
               alt="Foto de {{ player.name }}"
               class="h-64 w-full rounded-xl object-cover object-center">
        {% else %}
          <div class="flex h-64 w-full items-center justify-center rounded-xl border border-dashed border-slate-700 bg-slate-900 text-slate-500">
            <svg class="h-12 w-12" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 1 1-5.5 2.25A3 3 0 0 1 15.75 5.25ZM4.5 20.25a8.25 8.25 0 1 1 16.5 0Z" />
            </svg>
          </div>
        {% endif %}

        <dl class="mt-6 space-y-4 text-sm text-slate-200">
          <div class="flex items-center justify-between">
            <dt class="text-slate-400">Status atual</dt>
            <dd>
              <span class="inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold {{ player.status_badge_class }}">
                {{ player.get_status_display }}
              </span>
            </dd>
          </div>
          <div class="flex items-center justify-between">
            <dt class="text-slate-400">Clube atual</dt>
            <dd>{{ player.current_club|default:'Sem clube informado' }}</dd>
          </div>
          <div class="flex items-center justify-between">
            <dt class="text-slate-400">Valor de mercado</dt>
            <dd>
              {% if player.market_value %}
                R$ {{ player.market_value|floatformat:2 }}
              {% else %}
                <span class="text-slate-500">Não informado</span>
              {% endif %}
            </dd>
          </div>
          <div class="flex items-center justify-between">
            <dt class="text-slate-400">Observador responsável</dt>
            <dd>{{ player.created_by.get_full_name|default:player.created_by.email }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-slate-400">Data de cadastro</dt>
            <dd>{{ player.created_at|date:"d/m/Y H:i" }}</dd>
          </div>
          <div class="flex flex-col gap-1">
            <dt class="text-slate-400">Última atualização</dt>
            <dd>{{ player.updated_at|date:"d/m/Y H:i" }}</dd>
          </div>
        </dl>
      </div>
    </div>

    <div class="lg:col-span-2 space-y-6">
      <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-6 shadow-lg shadow-slate-950/40">
        <h3 class="text-lg font-semibold text-slate-100">Perfil do jogador</h3>
        <div class="mt-4 grid gap-4 md:grid-cols-2">
          <div class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
            <span class="text-xs uppercase text-slate-500">Posição</span>
            <p class="mt-1 text-sm font-semibold text-slate-100">{{ player.get_position_display }}</p>
          </div>
          <div class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
            <span class="text-xs uppercase text-slate-500">Data de nascimento</span>
            <p class="mt-1 text-sm font-semibold text-slate-100">{{ player.birth_date|date:"d/m/Y" }}</p>
          </div>
          <div class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
            <span class="text-xs uppercase text-slate-500">Nacionalidade</span>
            <p class="mt-1 text-sm font-semibold text-slate-100">{{ player.nationality }}</p>
          </div>
          <div class="rounded-xl border border-slate-800 bg-slate-900/70 p-4">
            <span class="text-xs uppercase text-slate-500">Idade</span>
            <p class="mt-1 text-sm font-semibold text-slate-100">{{ player.age }} anos</p>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-6 shadow-lg shadow-slate-950/40">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-slate-100">Observações detalhadas</h3>
          <span class="inline-flex items-center rounded-full border border-slate-700 px-3 py-1 text-xs font-semibold text-slate-300">
            Inteligência de campo
          </span>
        </div>
        {% if player.notes %}
          <p class="mt-4 whitespace-pre-line text-sm leading-relaxed text-slate-200">
            {{ player.notes }}
          </p>
        {% else %}
          <p class="mt-4 text-sm text-slate-500">
            Nenhuma observação foi registrada até o momento.
          </p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
