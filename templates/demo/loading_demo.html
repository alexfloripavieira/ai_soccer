{% extends 'base.html' %}
{% load static %}

{% block title %}Demo de Loading Spinners - AI Soccer{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <!-- Page Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-slate-100 mb-2">
      Demonstração de Loading Spinners
    </h1>
    <p class="text-slate-400">
      Exemplos de uso do sistema de loading spinners do AI Soccer
    </p>
  </div>

  <!-- Demo Sections -->
  <div class="space-y-8">
    <!-- 1. Full Page Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">1. Full Page Loading Overlay</h2>
      <p class="text-slate-400 mb-4">
        Overlay completo que bloqueia toda a página durante carregamento.
      </p>

      <div class="flex flex-wrap gap-3">
        <button onclick="demoFullPageLoading()"
                class="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Mostrar Loading de Página
        </button>

        <button onclick="demoFullPageWithProgress()"
                class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Loading com Barra de Progresso
        </button>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          Loading.showPage('Carregando página...', 'Por favor, aguarde');
        </code>
      </div>
    </section>

    <!-- 2. Button Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">2. Button Loading States</h2>
      <p class="text-slate-400 mb-4">
        Transforma botões em estado de loading durante operações.
      </p>

      <div class="flex flex-wrap gap-3">
        <button id="demo-btn-1" onclick="demoButtonLoading('demo-btn-1')"
                class="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Salvar Dados
        </button>

        <button id="demo-btn-2" onclick="demoButtonLoading('demo-btn-2')"
                class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Exportar Excel
        </button>

        <button id="demo-btn-3" onclick="demoButtonLoading('demo-btn-3')"
                class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Excluir Item
        </button>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          Loading.button(button, true, 'Salvando...');
        </code>
      </div>
    </section>

    <!-- 3. Form Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">3. Form Submit Loading</h2>
      <p class="text-slate-400 mb-4">
        Loading automático ao submeter formulários.
      </p>

      <form id="demo-form"
            onsubmit="return demoFormLoading(event)"
            data-loading
            data-loading-text="Processando formulário..."
            data-loading-subtitle="Validando dados"
            class="space-y-4 max-w-md">

        <div>
          <label class="block text-sm font-medium text-slate-300 mb-2">
            Nome
          </label>
          <input type="text"
                 required
                 class="w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                 placeholder="Digite seu nome">
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-300 mb-2">
            Email
          </label>
          <input type="email"
                 required
                 class="w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                 placeholder="seu@email.com">
        </div>

        <button type="submit"
                id="form-submit-btn"
                class="w-full px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Enviar Formulário
        </button>
      </form>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          &lt;form data-loading data-loading-text="Enviando..."&gt;
        </code>
      </div>
    </section>

    <!-- 4. Inline Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">4. Inline Loading Spinners</h2>
      <p class="text-slate-400 mb-4">
        Spinners pequenos para uso inline em cards, listas, etc.
      </p>

      <div class="space-y-4">
        <div class="flex items-center space-x-3">
          {% include 'components/loading.html' with inline=True loading_text='Carregando dados...' extra_classes='text-green-400' %}
        </div>

        <div class="flex items-center space-x-3">
          {% include 'components/loading.html' with inline=True loading_text='Processando...' extra_classes='text-blue-400' %}
        </div>

        <div class="flex items-center space-x-3">
          {% include 'components/loading.html' with inline=True loading_text='Aguarde...' extra_classes='text-purple-400' %}
        </div>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          {% verbatim %}{% include 'components/loading.html' with inline=True %}{% endverbatim %}
        </code>
      </div>
    </section>

    <!-- 5. Skeleton Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">5. Skeleton Screens</h2>
      <p class="text-slate-400 mb-4">
        Loading placeholders para listas de conteúdo.
      </p>

      <div id="skeleton-container" class="mb-4">
        <div class="text-center py-8">
          <button onclick="demoSkeleton()"
                  class="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
            Mostrar Skeleton Loading
          </button>
        </div>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          Loading.skeleton(container, 3);
        </code>
      </div>
    </section>

    <!-- 6. Custom Loading -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">6. Custom Loading IDs</h2>
      <p class="text-slate-400 mb-4">
        Use IDs customizados para múltiplos loadings independentes.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-slate-900 rounded-lg p-6 relative">
          <h3 class="text-lg font-semibold text-slate-100 mb-2">Card 1</h3>
          <p class="text-slate-400 text-sm mb-4">Conteúdo do primeiro card</p>
          <button onclick="demoCustomLoading('loading-card-1')"
                  class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm">
            Carregar
          </button>
          {% include 'components/loading.html' with loading_id='loading-card-1' loading_text='Carregando card 1...' %}
        </div>

        <div class="bg-slate-900 rounded-lg p-6 relative">
          <h3 class="text-lg font-semibold text-slate-100 mb-2">Card 2</h3>
          <p class="text-slate-400 text-sm mb-4">Conteúdo do segundo card</p>
          <button onclick="demoCustomLoading('loading-card-2')"
                  class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm">
            Carregar
          </button>
          {% include 'components/loading.html' with loading_id='loading-card-2' loading_text='Carregando card 2...' %}
        </div>

        <div class="bg-slate-900 rounded-lg p-6 relative">
          <h3 class="text-lg font-semibold text-slate-100 mb-2">Card 3</h3>
          <p class="text-slate-400 text-sm mb-4">Conteúdo do terceiro card</p>
          <button onclick="demoCustomLoading('loading-card-3')"
                  class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm">
            Carregar
          </button>
          {% include 'components/loading.html' with loading_id='loading-card-3' loading_text='Carregando card 3...' %}
        </div>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          Loading.show('my-custom-id', { text: 'Custom text' });
        </code>
      </div>
    </section>

    <!-- 7. Promise Wrapper -->
    <section class="bg-slate-800 border border-slate-700 rounded-xl p-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-4">7. Promise Wrapper</h2>
      <p class="text-slate-400 mb-4">
        Envolve Promises com loading automático.
      </p>

      <div class="flex flex-wrap gap-3">
        <button onclick="demoPromiseWrapper()"
                class="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Simular Requisição AJAX
        </button>

        <button onclick="demoPromiseError()"
                class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
          Simular Erro
        </button>
      </div>

      <div id="promise-result" class="mt-4 hidden">
        <div class="bg-green-900/20 border border-green-500/40 rounded-lg p-4 text-green-200">
          <p class="font-semibold">Resultado da Promise:</p>
          <p class="text-sm mt-1" id="promise-data"></p>
        </div>
      </div>

      <div class="mt-4 bg-slate-900 rounded-lg p-4">
        <code class="text-sm text-green-400">
          await Loading.wrap('spinner-id', myPromise);
        </code>
      </div>
    </section>
  </div>

  <!-- API Reference -->
  <div class="mt-12 bg-slate-800 border border-slate-700 rounded-xl p-8">
    <h2 class="text-3xl font-bold text-slate-100 mb-6">API Reference</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <h3 class="text-lg font-semibold text-green-400 mb-2">Métodos Principais</h3>
        <ul class="space-y-2 text-sm text-slate-300">
          <li><code class="text-blue-400">Loading.show(id, options)</code> - Mostrar spinner</li>
          <li><code class="text-blue-400">Loading.hide(id, callback)</code> - Esconder spinner</li>
          <li><code class="text-blue-400">Loading.showPage(text, subtitle)</code> - Overlay global</li>
          <li><code class="text-blue-400">Loading.hidePage(callback)</code> - Esconder overlay</li>
          <li><code class="text-blue-400">Loading.button(btn, state, text)</code> - Loading em botão</li>
          <li><code class="text-blue-400">Loading.form(form, options)</code> - Loading em form</li>
          <li><code class="text-blue-400">Loading.wrap(id, promise, opts)</code> - Wrap promise</li>
          <li><code class="text-blue-400">Loading.skeleton(container, count)</code> - Skeleton screen</li>
        </ul>
      </div>

      <div>
        <h3 class="text-lg font-semibold text-green-400 mb-2">Data Attributes</h3>
        <ul class="space-y-2 text-sm text-slate-300">
          <li><code class="text-blue-400">data-loading</code> - Auto-loading em forms</li>
          <li><code class="text-blue-400">data-loading-text</code> - Texto principal</li>
          <li><code class="text-blue-400">data-loading-subtitle</code> - Texto secundário</li>
          <li><code class="text-blue-400">data-loading-button</code> - Texto do botão</li>
          <li><code class="text-blue-400">data-loading-page</code> - Mostrar overlay (true/false)</li>
        </ul>
      </div>
    </div>

    <div class="mt-6 p-4 bg-blue-900/20 border border-blue-500/40 rounded-lg">
      <p class="text-sm text-blue-200">
        <strong>Documentação completa:</strong> Consulte
        <code class="text-blue-300">docs/loading-spinner-guide.md</code>
        para exemplos detalhados e melhores práticas.
      </p>
    </div>
  </div>
</div>

{# Custom loading spinners for demo #}
{% include 'components/loading.html' with loading_id='demo-loading' loading_text='Demonstração' loading_subtitle='Testando loading...' show_progress=True %}

{% endblock %}

{% block extra_js %}
<script>
  // Demo functions
  function demoFullPageLoading() {
    Loading.showPage('Carregando página completa...', 'Isso é um exemplo de overlay');
    setTimeout(() => {
      Loading.hidePage(() => {
        alert('Loading de página concluído!');
      });
    }, 3000);
  }

  function demoFullPageWithProgress() {
    Loading.show('demo-loading', {
      text: 'Processando com progresso...',
      subtitle: 'Barra de progresso animada'
    });
    setTimeout(() => {
      Loading.hide('demo-loading');
    }, 4000);
  }

  function demoButtonLoading(btnId) {
    const btn = document.getElementById(btnId);
    Loading.button(btn, true, 'Processando...');

    setTimeout(() => {
      Loading.button(btn, false);
    }, 2500);
  }

  function demoFormLoading(event) {
    event.preventDefault();
    const submitBtn = document.getElementById('form-submit-btn');

    Loading.button(submitBtn, true, 'Enviando...');

    setTimeout(() => {
      Loading.button(submitBtn, false);
      Loading.hidePage();
      alert('Formulário enviado com sucesso! (demo)');
      document.getElementById('demo-form').reset();
    }, 3000);

    return false;
  }

  function demoSkeleton() {
    const container = document.getElementById('skeleton-container');
    Loading.skeleton(container, 4);

    setTimeout(() => {
      container.innerHTML = `
        <div class="space-y-4">
          ${[1, 2, 3, 4].map(i => `
            <div class="bg-slate-900 rounded-lg p-6">
              <h3 class="text-lg font-semibold text-slate-100">Item ${i}</h3>
              <p class="text-slate-400 mt-2">Conteúdo carregado com sucesso!</p>
            </div>
          `).join('')}
        </div>
      `;
    }, 3000);
  }

  function demoCustomLoading(loadingId) {
    Loading.show(loadingId, {
      text: `Carregando ${loadingId.split('-').pop()}...`,
      subtitle: 'Loading específico do card'
    });

    setTimeout(() => {
      Loading.hide(loadingId);
    }, 2500);
  }

  async function demoPromiseWrapper() {
    const resultDiv = document.getElementById('promise-result');
    const dataDiv = document.getElementById('promise-data');

    resultDiv.classList.add('hidden');

    try {
      const result = await Loading.wrap('page-loading',
        new Promise(resolve => {
          setTimeout(() => {
            resolve({ data: 'Dados recebidos com sucesso!', timestamp: new Date().toLocaleTimeString() });
          }, 2000);
        }),
        { text: 'Buscando dados da API...', subtitle: 'Aguardando resposta' }
      );

      dataDiv.textContent = `${result.data} (${result.timestamp})`;
      resultDiv.classList.remove('hidden');
      resultDiv.classList.remove('bg-red-900/20', 'border-red-500/40');
      resultDiv.classList.add('bg-green-900/20', 'border-green-500/40');
      resultDiv.querySelector('p').classList.remove('text-red-200');
      resultDiv.querySelector('p').classList.add('text-green-200');
    } catch (error) {
      dataDiv.textContent = error.message;
      resultDiv.classList.remove('hidden');
    }
  }

  async function demoPromiseError() {
    const resultDiv = document.getElementById('promise-result');
    const dataDiv = document.getElementById('promise-data');

    resultDiv.classList.add('hidden');

    try {
      await Loading.wrap('page-loading',
        new Promise((resolve, reject) => {
          setTimeout(() => {
            reject(new Error('Erro simulado: falha na conexão'));
          }, 2000);
        }),
        { text: 'Processando requisição...', subtitle: 'Isso vai falhar' }
      );
    } catch (error) {
      dataDiv.textContent = error.message;
      resultDiv.classList.remove('hidden');
      resultDiv.classList.remove('bg-green-900/20', 'border-green-500/40');
      resultDiv.classList.add('bg-red-900/20', 'border-red-500/40');
      resultDiv.querySelector('p').classList.remove('text-green-200');
      resultDiv.querySelector('p').classList.add('text-red-200');
    }
  }
</script>
{% endblock %}
