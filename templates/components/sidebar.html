{% load navigation_tags %}

{# Desktop Sidebar #}
<aside class="hidden w-72 flex-col border-r border-slate-800 bg-slate-950/70 px-6 py-8 backdrop-blur xl:flex animate-fade-in-down">
  <div class="flex items-center gap-3 animate-fade-in">
    <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-green-500 to-blue-500 text-white shadow-lg shadow-green-500/30 hover:shadow-green-500/50 transition-all duration-200 hover:scale-105">
      <span class="text-lg font-semibold">AI</span>
    </div>
    <div>
      <p class="text-sm font-semibold text-slate-200">AI Soccer</p>
      <p class="text-xs text-slate-500">Gestão Inteligente</p>
    </div>
  </div>

  <nav class="mt-10 space-y-3">
    {% for item in sidebar_items %}
      <div class="stagger-item">
        <a href="{{ item.href }}" class="menu-item-hover group flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 {% if item.active %}bg-gradient-to-r from-green-500/20 to-blue-500/20 text-green-200{% else %}text-slate-300 hover:bg-slate-900/70 hover:text-slate-100{% endif %}">
          {% if item.icon == 'home' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 3l9 6.75V21a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-3.75a1.5 1.5 0 0 0-1.5-1.5h-1.5a1.5 1.5 0 0 0-1.5 1.5V21a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 3 21V9.75Z" />
            </svg>
          {% elif item.icon == 'chart' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v18h18" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 15l3-3 3 3 4.5-4.5" />
            </svg>
          {% elif item.icon == 'activity' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h3l2.25-6 4.5 12 2.25-6h3" />
            </svg>
          {% elif item.icon == 'radar' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9 9 0 1 1 9-9" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v3m0 12v3m9-9h-3M6 12H3" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 12l6 6" />
            </svg>
          {% elif item.icon == 'briefcase' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 6V5.25A2.25 2.25 0 0 1 9.75 3h4.5A2.25 2.25 0 0 1 16.5 5.25V6M4.5 9.75A2.25 2.25 0 0 1 6.75 7.5h10.5a2.25 2.25 0 0 1 2.25 2.25v8.25A2.25 2.25 0 0 1 17.25 20.25H6.75A2.25 2.25 0 0 1 4.5 18V9.75Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6" />
            </svg>
          {% endif %}
          <span>{{ item.label }}</span>
          <svg class="h-4 w-4 ml-auto arrow-slide {% if item.active %}text-green-300{% else %}text-slate-500 group-hover:text-slate-300{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </a>
        {% if item.children %}
          <div class="mt-2 space-y-1 border-l border-slate-800/60 pl-6 {% if not item.active %}hidden{% endif %} dropdown-animate">
            {% for child in item.children %}
              <a href="{{ child.href }}" class="flex items-center justify-between rounded-lg px-3 py-2 text-xs font-semibold uppercase tracking-widest transition-all duration-200 {% if child.active %}bg-slate-900/80 text-green-200 border border-green-500/40{% else %}text-slate-400 hover:text-slate-200 hover:bg-slate-900/50 hover:translate-x-1{% endif %}">
                <span>{{ child.label }}</span>
                <svg class="h-3 w-3 arrow-slide {% if child.active %}text-green-300{% else %}text-slate-500{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </nav>
</aside>

{# Mobile Sidebar - Slide from left #}
<div id="mobile-sidebar-overlay" class="fixed inset-0 z-40 bg-slate-950/80 backdrop-blur-sm hidden xl:hidden modal-backdrop-enter" onclick="toggleMobileSidebar()"></div>
<aside id="mobile-sidebar" class="fixed inset-y-0 left-0 z-50 w-72 flex-col border-r border-slate-800 bg-slate-950/95 px-6 py-8 backdrop-blur transform -translate-x-full transition-transform duration-300 ease-in-out xl:hidden">
  <div class="flex items-center justify-between mb-8">
    <div class="flex items-center gap-3">
      <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-green-500 to-blue-500 text-white shadow-lg shadow-green-500/30">
        <span class="text-lg font-semibold">AI</span>
      </div>
      <div>
        <p class="text-sm font-semibold text-slate-200">AI Soccer</p>
        <p class="text-xs text-slate-500">Gestão Inteligente</p>
      </div>
    </div>
    <button onclick="toggleMobileSidebar()" class="p-2 rounded-lg hover:bg-slate-800 transition-colors duration-200">
      <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <nav class="space-y-3 overflow-y-auto max-h-[calc(100vh-120px)]">
    {% for item in sidebar_items %}
      <div>
        <a href="{{ item.href }}" class="menu-item-hover group flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 {% if item.active %}bg-gradient-to-r from-green-500/20 to-blue-500/20 text-green-200{% else %}text-slate-300 hover:bg-slate-900/70 hover:text-slate-100{% endif %}">
          {% if item.icon == 'home' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 3l9 6.75V21a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-3.75a1.5 1.5 0 0 0-1.5-1.5h-1.5a1.5 1.5 0 0 0-1.5 1.5V21a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 3 21V9.75Z" />
            </svg>
          {% elif item.icon == 'chart' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v18h18" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 15l3-3 3 3 4.5-4.5" />
            </svg>
          {% elif item.icon == 'activity' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h3l2.25-6 4.5 12 2.25-6h3" />
            </svg>
          {% elif item.icon == 'radar' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9 9 0 1 1 9-9" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v3m0 12v3m9-9h-3M6 12H3" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 12l6 6" />
            </svg>
          {% elif item.icon == 'briefcase' %}
            <svg class="h-5 w-5 icon-hover {% if item.active %}text-green-300{% else %}text-slate-400 group-hover:text-slate-200{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 6V5.25A2.25 2.25 0 0 1 9.75 3h4.5A2.25 2.25 0 0 1 16.5 5.25V6M4.5 9.75A2.25 2.25 0 0 1 6.75 7.5h10.5a2.25 2.25 0 0 1 2.25 2.25v8.25A2.25 2.25 0 0 1 17.25 20.25H6.75A2.25 2.25 0 0 1 4.5 18V9.75Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6" />
            </svg>
          {% endif %}
          <span>{{ item.label }}</span>
        </a>
        {% if item.children %}
          <div class="mt-2 space-y-1 border-l border-slate-800/60 pl-6 {% if not item.active %}hidden{% endif %}">
            {% for child in item.children %}
              <a href="{{ child.href }}" class="flex items-center justify-between rounded-lg px-3 py-2 text-xs font-semibold uppercase tracking-widest transition-all duration-200 {% if child.active %}bg-slate-900/80 text-green-200 border border-green-500/40{% else %}text-slate-400 hover:text-slate-200 hover:bg-slate-900/50{% endif %}">
                <span>{{ child.label }}</span>
                <svg class="h-3 w-3 {% if child.active %}text-green-300{% else %}text-slate-500{% endif %} transition-all duration-200" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </nav>
</aside>

<script>
function toggleMobileSidebar() {
  const sidebar = document.getElementById('mobile-sidebar');
  const overlay = document.getElementById('mobile-sidebar-overlay');

  if (sidebar.classList.contains('-translate-x-full')) {
    sidebar.classList.remove('-translate-x-full');
    overlay.classList.remove('hidden');
  } else {
    sidebar.classList.add('-translate-x-full');
    overlay.classList.add('hidden');
  }
}
</script>
