<header class="sticky top-0 z-40 w-full border-b border-slate-800/80 bg-slate-950/60 backdrop-blur animate-fade-in-down">
  <div class="mx-auto flex max-w-7xl items-center justify-between px-6 py-4 lg:px-8">
    <div class="flex items-center gap-3">
      {# Mobile Menu Button #}
      {% if request.user.is_authenticated %}
        <button onclick="toggleMobileSidebar()" class="xl:hidden p-2 rounded-lg hover:bg-slate-800 transition-all duration-200 hover:scale-105">
          <svg class="w-6 h-6 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      {% endif %}

      <a href="/" class="flex items-center gap-3 hover-color-smooth">
        <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-green-500 to-blue-500 text-sm font-semibold text-white shadow-lg shadow-green-500/30 hover:shadow-green-500/50 transition-all duration-200 hover:scale-105">
          AI
        </span>
        <div class="hidden sm:block">
          <p class="text-sm font-semibold text-slate-100">AI Soccer</p>
          <p class="text-xs text-slate-500">Dados para decisões rápidas</p>
        </div>
      </a>
    </div>

    <div class="flex items-center gap-3">
      {% if request.user.is_authenticated %}
        <!-- Search Button -->
        <a href="{% url 'search' %}" class="rounded-lg border border-slate-800 bg-slate-900/60 p-2.5 text-slate-300 transition-all duration-200 hover:border-green-500/60 hover:text-green-300 hover:scale-105" title="Busca Global">
          <svg class="h-5 w-5 icon-hover" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
          </svg>
        </a>

        <a href="/dashboard/" class="hidden rounded-lg border border-slate-800 px-3 py-2 text-xs font-semibold uppercase tracking-widest text-slate-300 transition-all duration-200 hover:border-green-500/60 hover:text-green-300 hover:scale-105 md:inline-flex">
          Dashboard
        </a>

        <!-- Notification Icon with Badge -->
        <a href="{% url 'notifications' %}" class="relative rounded-lg border border-slate-800 bg-slate-900/60 p-2.5 text-slate-300 transition-all duration-200 hover:border-green-500/60 hover:text-green-300 hover:scale-105">
          <svg class="h-5 w-5 icon-hover" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
          </svg>
          {% if unread_notifications_count > 0 %}
            <span class="absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-gradient-to-r from-red-500 to-red-600 text-[10px] font-bold text-white shadow-lg shadow-red-500/50 animate-pulse-slow">
              {{ unread_notifications_count|slice:":99" }}{% if unread_notifications_count > 99 %}+{% endif %}
            </span>
          {% endif %}
        </a>

        <details class="relative group">
          <summary class="flex cursor-pointer list-none items-center gap-3 rounded-xl border border-slate-800 bg-slate-900/60 px-3 py-2 text-sm text-slate-200 transition-all duration-200 hover:border-green-500/60 hover:text-green-200 hover:scale-105">
            <span class="flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-green-500 to-blue-500 text-sm font-semibold text-white shadow-lg shadow-green-500/30 transition-all duration-200 group-hover:shadow-green-500/50">
              {{ request.user.first_name|default:request.user.email|first|upper }}
            </span>
            <span class="hidden text-left sm:block">
              <span class="block text-xs font-medium text-slate-400">Bem-vindo</span>
              <span class="block text-sm font-semibold text-slate-100">{{ request.user.get_full_name|default:request.user.email }}</span>
            </span>
            <svg class="h-4 w-4 text-slate-400 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 9l6 6 6-6" />
            </svg>
          </summary>
          <div class="absolute right-0 mt-3 w-56 rounded-xl border border-slate-800 bg-slate-950/95 backdrop-blur-sm p-3 shadow-xl shadow-slate-950/70 dropdown-animate">
            <a href="{% url 'accounts:profile' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-200 transition-all duration-200 hover:bg-slate-900 hover:translate-x-1">
              <svg class="h-4 w-4 text-slate-400 icon-hover" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a4.5 4.5 0 1 0-4.5-4.5A4.5 4.5 0 0 0 12 12Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 21a7.5 7.5 0 0 0-15 0" />
              </svg>
              Meu perfil
            </a>
            <a href="/settings/" class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-200 transition-all duration-200 hover:bg-slate-900 hover:translate-x-1">
              <svg class="h-4 w-4 text-slate-400 icon-hover" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94l.953-1.768a1 1 0 0 1 1.76 0l.954 1.769a1 1 0 0 0 .95.553l1.953-.065a1 1 0 0 1 .983.74l.5 1.9a1 1 0 0 0 .659.69l1.834.611a1 1 0 0 1 .57 1.45l-.953 1.768a1 1 0 0 0 0 .998l.953 1.768a1 1 0 0 1-.57 1.45l-1.834.611a1 1 0 0 0-.659.69l-.5 1.9a1 1 0 0 1-.983.74l-1.953-.065a1 1 0 0 0-.95.553l-.954 1.769a1 1 0 0 1-1.76 0l-.954-1.768a1 1 0 0 0-.95-.553l-1.953.065a1 1 0 0 1-.983-.74l-.5-1.9a1 1 0 0 0-.659-.69l-1.834-.611a1 1 0 0 1-.57-1.45l.953-1.768a1 1 0 0 0 0-.998l-.953-1.768a1 1 0 0 1 .57-1.45l1.834-.611a1 1 0 0 0 .659-.69l.5-1.9a1 1 0 0 1 .983-.74l1.953.065a1 1 0 0 0 .95-.553Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-3-3 3 3 0 0 1 3 3Z" />
              </svg>
              Configurações
            </a>
            <form method="post" action="{% url 'accounts:logout' %}" class="mt-1">
              {% csrf_token %}
              <button type="submit" class="btn-animate flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm text-red-300 transition-all duration-200 hover:bg-red-500/10 hover:translate-x-1">
                <svg class="h-4 w-4 icon-hover" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6A2.25 2.25 0 0 0 5.25 5.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H9m9 0-2.25 2.25M18 12l-2.25-2.25" />
                </svg>
                Sair
              </button>
            </form>
          </div>
        </details>
      {% else %}
        <a href="{% url 'accounts:login' %}" class="btn-animate rounded-lg border border-slate-800 px-4 py-2 text-sm font-medium text-slate-200 transition-all duration-200 hover:border-green-500/60 hover:text-green-300 hover:scale-105">
          Entrar
        </a>
        <a href="{% url 'accounts:signup' %}" class="btn-animate rounded-lg bg-gradient-to-r from-green-500 to-blue-500 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-green-500/30 transition-all duration-200 hover:shadow-xl hover:scale-105">
          Criar conta
        </a>
      {% endif %}
    </div>
  </div>
</header>
