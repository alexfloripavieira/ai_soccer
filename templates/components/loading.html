{# Loading Spinner Component - AI Soccer #}
{# Usage: {% include 'components/loading.html' with loading_id='unique-id' loading_text='Carregando...' %} #}

{% load static %}

{# Full Page Loading Overlay (default) #}
{% if not inline %}
<div id="{{ loading_id|default:'page-loading' }}"
     class="fixed inset-0 z-50 flex items-center justify-center bg-slate-950/90 backdrop-blur-sm hidden"
     role="status"
     aria-live="polite"
     aria-label="Carregando conteÃºdo">

  <div class="flex flex-col items-center justify-center space-y-6">
    {# Animated Spinner with Gradient #}
    <div class="relative">
      {# Outer Ring - Rotating Gradient #}
      <div class="w-20 h-20 rounded-full border-4 border-slate-700 border-t-transparent animate-spin-slow"></div>

      {# Middle Ring - Counter Rotating #}
      <div class="absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-r-green-500 border-b-blue-500 animate-spin-reverse"></div>

      {# Inner Glow #}
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-500/20 to-blue-500/20 animate-pulse"></div>
      </div>

      {# Center Icon #}
      <div class="absolute inset-0 flex items-center justify-center">
        <svg class="w-8 h-8 text-slate-100" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
        </svg>
      </div>
    </div>

    {# Loading Text #}
    <div class="text-center">
      <p class="text-lg font-semibold text-slate-100 mb-1">
        {{ loading_text|default:'Carregando...' }}
      </p>
      <p class="text-sm text-slate-400">
        {{ loading_subtitle|default:'Por favor, aguarde' }}
      </p>
    </div>

    {# Progress Bar (optional) #}
    {% if show_progress %}
    <div class="w-64">
      <div class="h-1.5 bg-slate-800 rounded-full overflow-hidden">
        <div class="h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full animate-progress"></div>
      </div>
    </div>
    {% endif %}
  </div>
</div>

{# Inline Loading Spinner (for buttons, cards, etc) #}
{% else %}
<div id="{{ loading_id|default:'inline-loading' }}"
     class="inline-flex items-center space-x-2 {{ extra_classes }}"
     role="status"
     aria-live="polite"
     aria-label="Carregando">

  {# Small Spinner #}
  <div class="relative w-5 h-5">
    <div class="absolute inset-0 rounded-full border-2 border-slate-700 border-t-transparent animate-spin"></div>
    <div class="absolute inset-0 rounded-full border-2 border-transparent border-r-green-500 animate-spin-reverse"></div>
  </div>

  {# Text (if provided) #}
  {% if loading_text %}
  <span class="text-sm text-slate-300">{{ loading_text }}</span>
  {% endif %}
</div>
{% endif %}

{# Custom Styles for Animations #}
<style>
  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes spin-reverse {
    from {
      transform: rotate(360deg);
    }
    to {
      transform: rotate(0deg);
    }
  }

  @keyframes progress {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-spin-slow {
    animation: spin-slow 1.5s linear infinite;
  }

  .animate-spin-reverse {
    animation: spin-reverse 1s linear infinite;
  }

  .animate-progress {
    animation: progress 1.5s ease-in-out infinite;
  }
</style>
